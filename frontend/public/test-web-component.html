<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Web Component - Image Card</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      padding: 2rem;
      background: #f5f5f5;
    }
    h1 {
      text-align: center;
      color: #333;
    }
    .demo-container {
      max-width: 1200px;
      margin: 0 auto;
    }
    .section {
      background: white;
      padding: 2rem;
      border-radius: 12px;
      margin-bottom: 2rem;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    h2 {
      margin-top: 0;
      color: #667eea;
    }
    .images-grid-flex {
      display: flex;
      flex-wrap: wrap;
      gap: 1.5rem;
      justify-content: flex-start;
    }
    .images-grid-flex image-card {
      flex: 0 0 calc(33.333% - 1rem);
      min-width: 250px;
      max-width: 300px;
    }
    @media (max-width: 1000px) {
      .images-grid-flex image-card {
        flex: 0 0 calc(50% - 0.75rem);
      }
    }
    @media (max-width: 600px) {
      .images-grid-flex image-card {
        flex: 0 0 100%;
      }
    }
    .info {
      background: #e8f4f8;
      border-left: 4px solid #667eea;
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 4px;
    }
    .info h3 {
      margin-top: 0;
      color: #667eea;
    }
    code {
      background: #f0f0f0;
      padding: 0.2rem 0.4rem;
      border-radius: 3px;
      font-family: 'Courier New', monospace;
    }
  </style>
</head>
<body>
  <div class="demo-container">
    <h1>üñºÔ∏è Demo: Image Card Web Component</h1>

    <div class="section">
      <h2>üìã Informaci√≥n del Componente</h2>
      <div class="info">
        <h3>Caracter√≠sticas:</h3>
        <ul>
          <li>‚úÖ Tama√±o de imagen fijo: <strong>100px x 100px</strong></li>
          <li>‚úÖ Propiedades configurables: <code>image-id</code>, <code>image-url</code>, <code>alias</code>, <code>created</code></li>
          <li>‚úÖ Compatible con layout flex de <code>images-grid-flex</code></li>
          <li>‚úÖ Estilos encapsulados con Shadow DOM</li>
          <li>‚úÖ Manejo de errores con placeholder autom√°tico</li>
          <li>‚ö†Ô∏è Los botones de editar/eliminar no tienen funcionalidad en este commit (seg√∫n requisito #5)</li>
        </ul>
      </div>

      <h3>Uso del componente:</h3>
      <pre><code>&lt;image-card
  image-id="123"
  image-url="https://example.com/image.jpg"
  alias="MyAvatar"
  created="2024-12-01T00:00:00.000Z"
&gt;&lt;/image-card&gt;</code></pre>
    </div>

    <div class="section">
      <h2>üß™ Demo: M√∫ltiples Image Cards</h2>
      <div class="images-grid-flex" id="demo-grid">
        <!-- Web components will be inserted here -->
      </div>
    </div>
  </div>

  <script type="module">
    // Import the web component
    const componentCode = `
/**
 * ImageCard Web Component
 */
class ImageCard extends HTMLElement {
  constructor() {
    super();
    this.attachShadow({ mode: 'open' });
  }

  static get observedAttributes() {
    return ['image-id', 'image-url', 'alias', 'created', 'placeholder'];
  }

  connectedCallback() {
    this.render();
  }

  attributeChangedCallback(name, oldValue, newValue) {
    if (oldValue !== newValue) {
      this.render();
    }
  }

  get imageId() {
    return this.getAttribute('image-id') || '';
  }

  get imageUrl() {
    return this.getAttribute('image-url') || '';
  }

  get alias() {
    return this.getAttribute('alias') || 'Sin nombre';
  }

  get created() {
    return this.getAttribute('created') || '';
  }

  get placeholder() {
    return this.getAttribute('placeholder') || 
      "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%23f0f0f0' width='100' height='100'/%3E%3Ctext x='50' y='55' text-anchor='middle' font-size='40'%3EüñºÔ∏è%3C/text%3E%3C/svg%3E";
  }

  escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
  }

  formatDate(dateString) {
    if (!dateString) return 'N/A';
    try {
      return new Date(dateString).toLocaleDateString('es');
    } catch (e) {
      return dateString;
    }
  }

  render() {
    const imageUrl = this.imageUrl ? this.imageUrl + '?size=medium' : this.placeholder;
    const alias = this.escapeHtml(this.alias);
    const formattedDate = this.formatDate(this.created);

    this.shadowRoot.innerHTML = \`
      <style>
        :host {
          display: block;
          background: #f8f9fa;
          border-radius: 12px;
          padding: 1rem;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
          transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        :host(:hover) {
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .image-container {
          width: 100%;
          height: 100px;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          border-radius: 8px;
          margin-bottom: 0.75rem;
          background: #e0e0e0;
        }

        img {
          width: 100px;
          height: 100px;
          object-fit: cover;
          border-radius: 8px;
        }

        h4 {
          margin: 0 0 0.5rem 0;
          font-size: 1.1rem;
          color: #333;
          word-break: break-word;
        }

        .meta {
          font-size: 0.85rem;
          color: #666;
          margin-bottom: 0.75rem;
        }

        .actions {
          display: flex;
          gap: 0.5rem;
        }

        .btn {
          padding: 0.5rem 1rem;
          font-size: 0.9rem;
          border: none;
          border-radius: 8px;
          cursor: pointer;
          font-weight: 500;
          transition: all 0.2s ease;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        .btn-primary {
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          color: white;
        }

        .btn-primary:hover {
          transform: translateY(-1px);
          box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3);
        }

        .btn-danger {
          background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
          color: white;
        }

        .btn-danger:hover {
          transform: translateY(-1px);
          box-shadow: 0 4px 8px rgba(245, 87, 108, 0.3);
        }
      </style>

      <div class="card-content">
        <div class="image-container">
          <img 
            src="\${imageUrl}" 
            alt="\${alias}"
            onerror="this.src='\${this.placeholder}'"
          />
        </div>
        <h4>\${alias}</h4>
        <div class="meta">
          ID: \${this.escapeHtml(this.imageId)}<br>
          Creado: \${formattedDate}
        </div>
        <div class="actions">
          <button class="btn btn-primary edit-btn" data-id="\${this.escapeHtml(this.imageId)}">
            ‚úèÔ∏è Editar
          </button>
          <button class="btn btn-danger delete-btn" data-id="\${this.escapeHtml(this.imageId)}">
            üóëÔ∏è Eliminar
          </button>
        </div>
      </div>
    \`;
  }
}

// Register the custom element
customElements.define('image-card', ImageCard);
`;

    // Execute the component code
    eval(componentCode);

    // Create demo data
    const demoImages = [
      {
        id: '1',
        imageUrl: 'https://i.pravatar.cc/100?img=1',
        alias: 'Avatar01',
        created: '2024-12-01T10:00:00.000Z'
      },
      {
        id: '2',
        imageUrl: 'https://i.pravatar.cc/100?img=2',
        alias: 'UserAvatar',
        created: '2024-12-01T11:30:00.000Z'
      },
      {
        id: '3',
        imageUrl: 'https://i.pravatar.cc/100?img=3',
        alias: 'TestImage',
        created: '2024-12-01T12:45:00.000Z'
      },
      {
        id: '4',
        imageUrl: '', // Empty URL to test placeholder
        alias: 'NoImage',
        created: '2024-12-01T13:00:00.000Z'
      },
      {
        id: '5',
        imageUrl: 'https://i.pravatar.cc/100?img=5',
        alias: 'Demo12345',
        created: '2024-12-01T14:15:00.000Z'
      },
      {
        id: '6',
        imageUrl: 'https://i.pravatar.cc/100?img=6',
        alias: 'SampleAvatar',
        created: '2024-12-01T15:30:00.000Z'
      }
    ];

    // Render demo images
    const grid = document.getElementById('demo-grid');
    demoImages.forEach(image => {
      const card = document.createElement('image-card');
      card.setAttribute('image-id', image.id);
      card.setAttribute('image-url', image.imageUrl);
      card.setAttribute('alias', image.alias);
      card.setAttribute('created', image.created);
      grid.appendChild(card);
    });
  </script>
</body>
</html>
